<section class="section">
  <div class="container">
    <div class="grid">
      <article class="card" *ngFor="let item of itemsList">
        <div class="cont">
        <div class="product-card">
            <div class="product-card__image">
                <img src="https://davidsfelipe-001-site1.ltempurl.com/{{item.imageUrl}}" alt="{{item.name}}">
            </div>
            <div class="product-card__info">
                <h2 class="product-card__title">{{item.name}}</h2>
                <div class="product-card__price-row">
                    <span class="product-card__price">₡{{item.price}}</span>
                    <button class="btn btn-primary" (click)="openModal(item.id)">Add to Cart</button>
                </div>
            </div>
        </div>
    </div>

        <!-- Sólo renderizamos backdrop + modal si showModal true -->
        <ng-container *ngIf="showModal[item.id]">
          <div class="modal-backdrop fade show"></div>
          <div
            class="modal d-block fade show"
            tabindex="-1"
            id="modal-{{item.id}}"
          >
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h4 class="modal-title">{{ item.name }}</h4>
                  <button
                    type="button"
                    class="btn-close CloseModal"
                    (click)="closeModal(item.id)"
                  ></button>
                </div>
                <div class="modal-body">
                  <p>{{ item.name }} has been added to your cart.</p>
                  <p><strong>Price:</strong> ₡{{ item.price }}</p>
                  <p [innerText]="item.description"></p>
                  <div class="form-floating">
                    <input
                      type="number"
                      min="1"
                      max="10"
                      [(ngModel)]="quantities[item.id]"
                      class="form-control"
                      id="quantity-{{ item.id }}"
                    />
                    <label for="quantity-{{ item.id }}" class="form-label">
                      Quantity
                    </label>
                  </div>
                </div>
                <div class="modal-footer btn-group">
                  <button class="btn btn-primary" (click)="add(item.id, item.name)">Add</button>
                  <button
                    type="button"
                    class="btn btn-danger CloseModal"
                    (click)="closeModal(item.id)"
                  >
                    Close
                  </button>
                </div>
              </div>
            </div>
          </div>
        </ng-container>
      </article>
    </div>
  </div>
</section>
