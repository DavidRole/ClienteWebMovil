<section class="section">
  <div class="container">
    <div class="grid">
      <article class="card" *ngFor="let item of itemsList">
        <img class="card__image" src="https://davidsfelipe-001-site1.ltempurl.com/{{item.imageUrl}}" />
        <div class="card__data">
          <div class="card__info">
            <h2>{{ item.name }}</h2>
          </div>
          <h3 class="card__price">₡{{ item.price }}</h3>
          <!-- Botón que abre modal -->
          <button
            class="card__add OpenModal"
            (click)="openModal(item.id)"
          >+</button>
        </div>

        <!-- Sólo renderizamos backdrop + modal si showModal true -->
        <ng-container *ngIf="showModal[item.id]">
          <div class="modal-backdrop fade show"></div>
          <div class="modal d-block fade show" tabindex="-1" id="modal-{{item.id}}">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h4 class="modal-title">{{ item.name }}</h4>
                  <button
                    type="button"
                    class="btn-close CloseModal"
                    (click)="closeModal(item.id)"
                  ></button>
                </div>
                <div class="modal-body">
                  <p>{{ item.name }} has been added to your cart.</p>
                  <p><strong>Price:</strong> ₡{{ item.price }}</p>
                  <p [innerText]="item.description"></p>
                  <div class="form-floating">
                    <input
                      type="number"
                      min="1"
                      max="10"
                      [(ngModel)]="quantities[item.id]"
                      class="form-control"
                      id="quantity-{{ item.id }}"
                    />
                    <label for="quantity-{{ item.id }}" class="form-label">
                      Quantity
                    </label>
                  </div>
                </div>
                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-danger CloseModal"
                    (click)="closeModal(item.id)"
                  >
                    Close
                  </button>
                </div>
              </div>
            </div>
          </div>
        </ng-container>

      </article>
    </div>
  </div>
</section>
